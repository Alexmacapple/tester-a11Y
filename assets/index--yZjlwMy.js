(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();const h="/tester-a11y",v="Démo accessibilité numérique";window.onload=()=>{p("components/main/main.html").then(o=>{document.querySelector("#app").innerHTML=o,T()})};function T(){customElements.define("router-outlet",S),customElements.define("router-link",C),customElements.define("custom-header",k),customElements.define("custom-footer",q),customElements.define("custom-picture",x),customElements.define("custom-alert",M)}class k extends HTMLElement{async connectedCallback(){this.innerHTML=await p("components/header/header.html"),this.initTheme(),L()}initTheme(){const e=localStorage.getItem("theme");e?this.setTheme(e):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?this.setTheme("dark"):this.setTheme("light");const t=document.getElementById("btnLight");t&&(t.onclick=()=>this.setTheme("light"));const s=document.getElementById("btnDark");s&&(s.onclick=()=>this.setTheme("dark"))}setTheme(e){var t=document.querySelectorAll(".theme-switcher-buttons button");t.forEach(s=>{s.getAttribute("data-theme")===e?s.setAttribute("aria-pressed",!0):s.setAttribute("aria-pressed",!1)}),document.documentElement.setAttribute("data-selected-theme",e),localStorage.setItem("theme",e)}}class q extends HTMLElement{async connectedCallback(){this.innerHTML=await p("components/footer/footer.html")}}class x extends HTMLElement{constructor(){super()}connectedCallback(){let e=document.createElement("img");e.alt=this.attributes.alt.value,e.src=this.attributes.src.value,e.setAttribute("lazy","loading"),this.attributes.style&&(e.style=this.attributes.style.value),this.attributes.class&&this.attributes.class.value.split(" ").forEach(t=>{e.classList.add(t)}),this.appendChild(e)}}class S extends HTMLElement{constructor(){super(),window.addEventListener("popstate",()=>this.handleRoute())}async connectedCallback(){await this.handleRoute()}async handleRoute(){const e=window.location.pathname.replace(h,"");let t="",s="";switch(e){case"/":s="pages/accueil.html",t="Accueil";break;case"/les-contrastes":s="pages/les-contrastes.html",t="Testons les contrastes";break;case"/la-langue":s="pages/cas-pratique-2.html",t="Testons la langue";break;case"/les-images":s="pages/les-images.html",t="Les images";break;case"/les-formulaires":s="pages/les-formulaires.html",t="Les formulaires";break;case"/cas-pratique-5":s="pages/cas-pratique-5.html",t="Cas pratique n°5 : les liens";break;case"/cas-pratique-6":s="pages/cas-pratique-6.html",t="Cas pratique n°6 : les boutons";break;case"/ci-cd":s="pages/ci-cd.html",t="Tests automatisés";break;case"/bonus":s="pages/bonus.html",t="Bonus";break;case"/faq":s="pages/faq.html",t="Foire aux questions";break;case"/ressources":s="pages/ressources.html",t="Ressources";break;case"/a-propos":s="pages/a-propos.html",t="A propos";break;default:s="pages/erreur.html",t="Erreur 404"}this.innerHTML=await p(s),document.title=`${t} - ${v}`,e==="/la-langue"?document.documentElement.setAttribute("lang","en"):document.documentElement.setAttribute("lang","fr"),this.initJavascript(e),this.setCurrentPage(document.title)}setCurrentPage(e){document.getElementById("title-page").innerHTML=e}async navigate(e){window.history.pushState({},"",e),await this.handleRoute()}initJavascript(e){if(e==="/les-images"&&document.getElementById("show-button").addEventListener("click",t=>{A(".images");const s=t.target;document.querySelector(".hidden")!==null?s.innerText="Afficher les images":s.innerText="Cacher les images"}),e==="/les-formulaires"){const t=document.getElementById("btnSubmitV1");t&&t.addEventListener("click",()=>{const c=document.getElementById("form-v1").querySelectorAll("input");for(const a of c)a.value.trim()!==""?(a.style.borderColor="",a.style.borderWidth=""):(a.style.borderColor="red",a.style.borderWidth="2px")});const s=document.getElementById("btnSubmitV2");s&&s.addEventListener("click",()=>{const c=document.getElementById("form-v2").querySelectorAll("input");for(const a of c)a.value.trim()!==""?(a.style.borderColor="",a.style.borderWidth=""):(a.style.borderColor="red",a.style.borderWidth="2px")});const r=document.getElementById("btnSubmitV3");r&&r.addEventListener("click",()=>{const c=document.getElementById("form-v3").querySelectorAll("input");for(const a of c){const i=a.value.trim()!=="",u=a.closest(".fr-input-group"),m=u.querySelector(".fr-error-text"),d=u.querySelector(".fr-label");if(i)a.classList.remove("fr-input--error"),u.classList.remove("fr-input-group--error"),m.innerText="";else{a.classList.add("fr-input--error"),u.classList.add("fr-input-group--error");const f=d.textContent.trim();m.innerText=`Le champ ${f} est obligatoire`}}});const n=document.getElementById("btnSubmit");n&&n.addEventListener("click",()=>{const c=document.getElementById("form-v4").querySelectorAll("input, textarea");let a=!1;for(const i of c){let u=i.value.trim()!=="",m="";i.type==="email"&&u&&(u=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.value),u||(m="Le format de l'email est invalide (ex: nom@domaine.fr)"));const d=i.closest(".fr-input-group"),f=d.querySelector(".fr-error-text"),E=d.querySelector(".fr-label");if(u)i.classList.remove("fr-input--error"),d.classList.remove("fr-input-group--error"),i.ariaInvalid=!1,f.innerText="";else if(a=!0,i.classList.add("fr-input--error"),d.classList.add("fr-input-group--error"),i.ariaInvalid=!0,m)f.innerText=m;else{const b=E.childNodes[0].textContent.trim();f.innerText=`Le champ "${b}" est obligatoire`}}if(a){g("error","Certains champs sont incomplets ou invalides !");const i=document.querySelector("[aria-invalid=true]");i&&i.focus()}else g("success","Formulaire valide ! Tous les champs sont remplis correctement.")})}}}async function p(o){const e=await fetch(`${h}/${o}`);if(!e.ok)throw new Error("Erreur lors du chargement du fichier HTML : "+e.statusText);return await e.text()}function w(o){const e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=`${h}/${o}`,document.head.appendChild(e)}function L(){document.querySelectorAll("router-link").forEach(e=>{let t=e.querySelector("a");window.location.pathname.replace(h,"")===e.attributes.href.value?(t.setAttribute("aria-current","page"),t.classList.add("active")):(t.removeAttribute("aria-current"),t.classList.remove("active")),t.addEventListener("click",()=>{L()})})}class C extends HTMLElement{constructor(){super()}connectedCallback(){const e=document.createElement("a"),t=h+this.attributes.href.value;e.href=t,e.text=this.attributes.title.value,e.onclick=s=>{s.preventDefault(),document.querySelector("router-outlet").navigate(t)},this.appendChild(e)}}function A(o){const e=document.querySelector(o);e&&(e.classList.contains("hidden")?e.classList.remove("hidden"):e.classList.add("hidden"))}class M extends HTMLElement{async connectedCallback(){w("components/alert/alert.scss"),this.innerHTML=await p("components/alert/alert.html")}}function g(o,e){let t="",s="";switch(o){case"info":t="fa-circle-info",s="info";break;case"success":t="fa-circle-check",s="success";break;case"error":t="fa-circle-exclamation",s="error";break;default:return}const r=document.querySelector(".alert");if(!r)throw new Error("Le composant alert n'est pas défini");r.classList.add("display"),r.classList.add(s);const n=r.querySelector("i");n&&n.classList.add(t);const l=r.querySelector(".alert-title");l&&(l.innerText=e);const c=r.querySelector("button");c&&c.addEventListener("click",()=>y(s,t)),setTimeout(()=>y(s,t),1500)}function y(o,e){const t=document.querySelector(".alert");if(!t)throw new Error("Le composant alert n'est pas défini");t.classList.remove("display"),t.classList.remove(o);const s=t.querySelector("i");s&&s.classList.remove(e);const r=t.querySelector(".alert-title");r&&(r.innerText="");const n=t.querySelector("button");n&&n.removeEventListener("click",n)}
